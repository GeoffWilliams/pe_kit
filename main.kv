#:kivy 1.0
ScreenManagement:
    MainScreen:
    SettingsScreen:
  
<MainScreen>:
    name: 'main'
    
    status_label: status_label
    advanced_layout: advanced_layout
    advanced_layout_holder: advanced_layout_holder

    BoxLayout:
        orientation: 'vertical'
        
        BoxLayout:
            # PE Kit banner
            AnchorLayout:
                size_hint: (0.8,1) 
                Label:
                    text: 'PE Kit'
                    font_size: '40sp'
                             
            # settings
            Button:
                text: 'Settings'
                size_hint: (0.2,1)
                on_release: app.root.current = 'settings'
                Image:
                    source: 'icons/settings.png'
                    x: self.parent.x + (self.parent.width/2) - (self.width/2)
                    y: self.parent.y + (self.parent.height/4) - (self.height/2)
                    
        BoxLayout:
            # console    
            Button:
                text: 'Console'
                on_press: app.pe_console()

            # terminal
            Button:
                text: 'Terminal'
                on_press: app.pe_terminal()

        #
        # Advanced
        #
        Button:
            text: 'Toggle advanced actions'
            on_press: app.toggle_advanced()
        
        BoxLayout:
            id: advanced_layout_holder
        
            BoxLayout:
                id: advanced_layout

                # run puppet
                Button:
                    text:  'Run Puppet'
                    on_release: app.run_puppet()

                # dockerbuild
                Button:
                    text: 'Dockerbuild'
                    on_release: app.dockerbuild()

        #
        # Status
        #
        BoxLayout:
            Label:
                text: 'Status:'
            Label:
                id: status_label
                text: '...'            
            
<SettingsScreen>:
    name: 'settings'

    # widget/class variable mapping
    download_images_layout: download_images_layout
    selected_image_button: selected_image_button

    BoxLayout:
        orientation: 'vertical'

        # start automatically
        BoxLayout:
            CheckBox:
                value: 'checked'

            Label:
                text: 'Start container automatically'
            
        # kill orphans
        BoxLayout:
            CheckBox:
                value: 'checked'

            Label:
                text: 'Kill orphaned containers on startup'
                
        # downloadable images
        BoxLayout:
            id: download_images_layout
            padding: 20
            orientation: 'vertical'

        # selected image
        BoxLayout:
            Label:
                text: "Selected image"
                
            Button:
                id: selected_image_button
                text: "Available images"
              

        Button:
            on_release: app.root.current = 'main'
            text: 'Back'
