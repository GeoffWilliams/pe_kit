#:kivy 1.0
ScreenManagement:
    MainScreen:
    SettingsScreen:
  
<MainScreen>:
    name: 'main'
    
    advanced_layout: advanced_layout
    advanced_layout_holder: advanced_layout_holder
    app_status_label: app_status_label
    container_status_label:container_status_label
    container_delete_image: container_delete_image
    docker_status_image: docker_status_image
    
    BoxLayout:
        orientation: 'vertical'
        padding: 20
        
        BoxLayout:
            # PE Kit banner
            AnchorLayout:
                size_hint: (0.8,1) 
                Label:
                    text: 'PE Kit'
                    font_size: '40sp'
                             
            # settings
            Button:
                text: 'Settings'
                size_hint: (0.2,1)
                halign: 'center'
                valign: 'bottom'
                text_size: (self.width, self.height - 40)
                on_release: app.root.current = 'settings'
                Image:
                    source: 'icons/settings.png'
                    x: self.parent.x + (self.parent.width/2) - (self.width/2)
                    y: self.parent.y + (self.parent.height/2)
                    
        BoxLayout:
            # console    
            Button:
                text: 'Console'
                on_press: app.pe_console()

            # terminal
            Button:
                text: 'Terminal'
                on_press: app.pe_terminal()

        #
        # Advanced
        #
        Button:
            text: 'Toggle advanced actions'
            on_press: app.toggle_advanced()
            size_hint: (0.4, 0.5)
        
        BoxLayout:
            id: advanced_layout_holder
        
            BoxLayout:
                id: advanced_layout

                # run puppet
                Button:
                    text:  'Run Puppet'
                    on_release: app.run_puppet()

                # dockerbuild
                Button:
                    text: 'Dockerbuild'
                    on_release: app.dockerbuild()

        #
        # Status
        #
        BoxLayout:
            Label:
                text: 'Status:'
            Label:
                id: app_status_label
                text: '...'
            Label:
                id: container_status_label
                text: '...'
            Image:
                id: container_delete_image
                size: (40,40)
            Image:
                id: docker_status_image
                allow_stretch: True
                size_hint_y: None
                size_hint_x: None
                height: dp(100)
                width: dp(100)
                source:  'icons/ok.png'
                

            
<SettingsScreen>:
    name: 'settings'

    # widget/class variable mapping
    download_images_layout: download_images_layout
    selected_image_button: selected_image_button

    BoxLayout:
        orientation: 'vertical'

        # start automatically
        BoxLayout:
            CheckBox:
                value: 'checked'

            Label:
                text: 'Start container automatically'
            
        # kill orphans
        BoxLayout:
            CheckBox:
                value: 'checked'

            Label:
                text: 'Kill orphaned containers on startup'
                
        # downloadable images
        BoxLayout:
            id: download_images_layout
            padding: 20
            orientation: 'vertical'

        # selected image
        BoxLayout:
            Label:
                text: "Selected image"
                
            Button:
                id: selected_image_button
                text: "Available images"
              

        Button:
            on_release: app.root.current = 'main'
            text: 'Back'
